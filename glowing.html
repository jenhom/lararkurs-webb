<!DOCTYPE html>
<html lang="sv">¨
<head>
    <meta charset="UTF-8">
    <title>Neonlysande linjer</title>
    <style>
      body {
	margin: 0;
	background-color: black;
      }
      canvas {
	background-color: black;
      }
    </style>
</head>
<body>
  <canvas id="glowcanvas">Neonlysande linjer</canvas>
<script>

(function() {
    var canvas = document.getElementById("glowcanvas"), context = canvas.getContext('2d');

    // Fyll hela dokumentfönstret
    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight - 5;

    // startvärden första kurvan
    var lastX = canvas.width * Math.random();
    var lastY = canvas.height * Math.random();
    // färg väljs ur "färghjulet"
    var hue = 0;

    function line(context, lastX, lastY, hue) {
	// Ignorera tills vidare (sparar "tillspåndet") - Behövs egentligen inte i denna övning, här för goda vanans skull
	context.save();
	// Påbörja en ny kurva
	context.beginPath();
	// Bredd mellan 5 och 15
	context.lineWidth = 5 + 10 * Math.random();
	// Gå till startpunkt i koordinatsystemet = där förra kurvan slutade
	context.moveTo(lastX, lastY);
	// Slumpa fram en ny slutpunkt
	lastX = context.canvas.width * Math.random();
	lastY = context.canvas.height * Math.random();
	// "Beställ" en kurva med slumpmässig böjning
	context.bezierCurveTo(context.canvas.width * Math.random(),
                              context.canvas.height * Math.random(),
                              context.canvas.width * Math.random(),
                              context.canvas.height * Math.random(),
                              lastX, lastY);

	//Gå ett slumpmässigt antal grader framåt i färghjulet
	hue = hue + 10 * Math.random();
	context.strokeStyle = 'hsl(' + hue + ', 50%, 50%)';

	// Glödande kantlinje på kurvan
	context.shadowColor = 'white';
	context.shadowBlur = 10;

	// Genomför själva ritandet
	context.stroke();
	// Återställ gamla tillståndet - Behövs egentligen inte i denna övning, här för goda vanans skull
	context.restore();

	// Rekursivt anrop = anropa sig själv
	// Funktionen, antal millisekunder, parametrarna
	setTimeout(line, 80, context, lastX, lastY, hue);

    }

    line(context, lastX, lastY, hue);

    // Skapa en helsvart men mycket transparent "hinna" som läggs överst, men gradvis flyttas bakåt
    function blank(context) {
	// svart med 90% genomskinlighet
	context.fillStyle = 'rgba(0, 0, 0, 0.1)';
	// fyrkant med fyllning
	context.fillRect(0, 0, context.canvas.width, context.canvas.height);
    }

    setInterval(blank, 100, context);

}());

</script>
</body>
</html>
